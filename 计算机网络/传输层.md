



# 运输层概述
![输入图片说明](https://raw.githubusercontent.com/2985496686/-/master/imgs/%E4%BC%A0%E8%BE%93%E5%B1%82/13w46b0IuOdMUs4M.png)

- 网络层主要负责网络寻址，路由选择，将数据发送给目标网络(主机)，但是计算机网络中真正通信的实体是通信两端的进程。
- 为运行在不同主机上的两个进程提供通信服务就是运输层的任务。
## 为什么TCP是面向连接的？

这里说的面向连接并不是指两个节点之间建立一个真正的通信信道，而是一个逻辑上的连接。这里的连接体现在：传输数据之前需要三次挥手确保两节点之间可以正常通信，在传输数据时两个节点需要共同维护这一连接(流量控制，拥塞控制等)，传输数据之后，需要通过四次挥手，确保双方都被告知断开连接，不在进行维护。非面向连接的UDP只管发送或者接受数据，不需要维护两个节点数据传输的状态。


![输入图片说明](https://raw.githubusercontent.com/2985496686/-/master/imgs/%E4%BC%A0%E8%BE%93%E5%B1%82/rlaYS0BuSS8Uyaxn.png)

![输入图片说明](https://raw.githubusercontent.com/2985496686/-/master/imgs/%E4%BC%A0%E8%BE%93%E5%B1%82/PRXDvem5n9cZsKfL.png)


# 运输层端口号复用与分用

## 为什么使用端口号
1. 计算机的进程在对外提供网络服务时，需要具有一个在该主机中唯一的标识，这样外部网络的消息发送到主机时才能准确的交付给目的进程。
2. 进程具有唯一进程号PID，但是PID在不同的操作系统中格式是不同的，显然不适合当作1中说的唯一标识。
![输入图片说明](https://raw.githubusercontent.com/2985496686/-/master/imgs/%E4%BC%A0%E8%BE%93%E5%B1%82/NPQNWI2Z2FXKz99K.png)


## 端口复用和分用

发送方的某些应用进程所发送的不同应用的报文在运输层使用 UDP 协议进行封装

- 这称为 UDP 复用
而另一些应用进程所发送的报文在运输层使用 TCP 协议进行封装

- 这称为 TCP 复用
运输层使用端口号来区分不同的应用进程。

不管是使用运输层的 UDP 协议封装成的 UDP 用户数据报，还是使用运输层的 TCP 协议封装成的 TCP 报文段在网络层都需要使用 IP 协议封装成 IP 数据报（称为 IP 复用）


## UDP和TCP区别
1. UDP是无连接协议，提供可靠传输；TCP是

<!--stackedit_data:
eyJoaXN0b3J5IjpbNDg5NTg1Mjk4LC0xOTY5OTEzMzU1LDg4NT
EwNTU0MiwtMTY5OTUzOTg4MSwtOTkwMDkyMzE1XX0=
-->